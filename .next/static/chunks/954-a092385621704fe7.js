"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{1954:function(e,t,s){s.d(t,{b:function(){return x}});var a=s(7437),r=s(29),n=s.n(r),o=s(2265),i=s(2718),l=s(2222),c=s(2489),d=s(9322),f=s(7168),m=s(2369),u=s(4743);function x(){let[e,t]=(0,o.useState)(!1),[s,r]=(0,o.useState)([{id:1,role:"assistant",content:"Hi! I'm BrainEdify's AI assistant \uD83C\uDF93\n\nআমি BrainEdify এর AI সহায়ক! আমি আপনাকে সাহায্য করতে পারি:\n\n\uD83D\uDCDA Course details (কোর্সের বিস্তারিত)\n\uD83D\uDCB0 Pricing info (মূল্য তথ্য)\n\uD83D\uDCDD Enrollment process (ভর্তি প্রক্রিয়া)\n\uD83D\uDC68‍\uD83C\uDFEB Teacher info (শিক্ষক তথ্য)\n⏰ Class schedule (ক্লাসের সময়সূচী)\n\nআপনি English, বাংলা, বা Banglish - যেকোনো ভাষায় প্রশ্ন করতে পারেন। How can I help you today?",timestamp:new Date}]),[x,h]=(0,o.useState)(""),[y,b]=(0,o.useState)(!1),[g,w]=(0,o.useState)(null),[p,j]=(0,o.useState)(0),v=(0,o.useRef)(null),N=(0,o.useRef)(null),k=()=>{var e;null===(e=v.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,o.useEffect)(()=>{k()},[s,y]),(0,o.useEffect)(()=>{e&&N.current&&N.current.focus()},[e]);let D=(0,o.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=e||x.trim();if(s&&!y){if(w(null),!t){let e={id:Date.now(),role:"user",content:s,timestamp:new Date};r(t=>[...t,e]),h("")}b(!0);try{let e=new AbortController,t=setTimeout(()=>e.abort(),25e3),a=await fetch("/api/chatbot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s}),signal:e.signal});if(clearTimeout(t),!a.ok){if(429===a.status)throw Error("Too many requests. Please wait a moment before trying again.");if(503===a.status)throw Error("Service temporarily unavailable. Please try again in a moment.");if(a.status>=500)throw Error("Server error. Please try again or contact support.");throw Error("Request failed with status ".concat(a.status))}let n=await a.json();if(n.success&&n.message){let e={id:Date.now()+1,role:"assistant",content:n.message,timestamp:new Date};r(t=>[...t,e]),j(0)}else throw Error(n.error||"Failed to get response from AI assistant")}catch(n){console.error("Chatbot error:",n);let e="I'm having trouble responding right now. Please try again or contact us directly at 01538309105! \uD83D\uDE0A",t=!0;if("AbortError"===n.name?e="Response took too long. Please try a shorter question or contact us at 01538309105! ⏰":n.message.includes("Too many requests")?(e="I'm getting too many requests right now. Please wait a moment and try again! \uD83D\uDE0A",t=!1):n.message.includes("Service temporarily unavailable")?e="The AI service is temporarily unavailable. Please contact us directly at 01538309105! \uD83D\uDCDE":(n.message.includes("Failed to fetch")||n.message.includes("network"))&&(e="Network connection issue. Please check your connection and try again! \uD83C\uDF10"),t&&p<2&&!n.message.includes("Too many requests")){j(e=>e+1),w({message:"".concat(e," Retrying... (").concat(p+1,"/").concat(2,")"),canRetry:!1}),setTimeout(()=>{D(s,!0)},2e3);return}w({message:e,canRetry:t&&p<2,originalMessage:s});let a={id:Date.now()+1,role:"assistant",content:e,timestamp:new Date,isError:!0};r(e=>[...e,a])}finally{b(!1)}}},[x,y,p]),C=e=>{h(e),N.current&&N.current.focus()};return(0,a.jsxs)(a.Fragment,{children:[!e&&(0,a.jsxs)("button",{onClick:()=>t(!0),"aria-label":"Open AI Chat Assistant",className:"jsx-e7c3f481c9f14ed0 fixed bottom-6 left-6 z-50 w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-full shadow-2xl hover:scale-110 transition-all duration-300 flex items-center justify-center group",children:[(0,a.jsx)(i.Z,{className:"w-8 h-8 group-hover:scale-110 transition-transform"}),(0,a.jsx)("div",{className:"jsx-e7c3f481c9f14ed0 absolute -top-12 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white px-3 py-1 rounded-lg text-sm whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:"Ask me anything!"})]}),e&&(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0 fixed bottom-6 left-6 z-50 w-96 h-[500px] bg-white rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden animate-slideInUp chatbot-window",children:[(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0 bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"jsx-e7c3f481c9f14ed0 w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0",children:[(0,a.jsx)("h3",{className:"jsx-e7c3f481c9f14ed0 font-bold text-lg",children:"BrainEdify Assistant"}),(0,a.jsx)("p",{className:"jsx-e7c3f481c9f14ed0 text-sm opacity-90",children:g?"Connection issue":"Always here to help"})]})]}),(0,a.jsx)("button",{onClick:()=>t(!1),"aria-label":"Close chat",className:"jsx-e7c3f481c9f14ed0 w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-colors",children:(0,a.jsx)(c.Z,{className:"w-5 h-5"})})]}),g&&g.canRetry&&(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0 bg-yellow-50 border-b border-yellow-200 p-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0 flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 text-yellow-600"}),(0,a.jsx)("span",{className:"jsx-e7c3f481c9f14ed0 text-sm text-yellow-800",children:"Connection issue"})]}),(0,a.jsxs)("button",{onClick:()=>{(null==g?void 0:g.originalMessage)&&(j(0),D(g.originalMessage,!0))},className:"jsx-e7c3f481c9f14ed0 text-sm bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-3 py-1 rounded-lg transition-colors flex items-center gap-1",children:[(0,a.jsx)(f.Z,{className:"w-3 h-3"}),"Retry"]})]}),(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0 flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[s.map(e=>(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0 "+"flex gap-3 ".concat("user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,a.jsx)("div",{className:"jsx-e7c3f481c9f14ed0 "+"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ".concat(e.isError?"bg-red-500":"bg-blue-500"),children:e.isError?(0,a.jsx)(d.Z,{className:"w-5 h-5 text-white"}):(0,a.jsx)(l.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0 "+"max-w-[70%] p-3 rounded-2xl ".concat("user"===e.role?"bg-blue-500 text-white ml-auto":e.isError?"bg-red-50 text-red-800 border border-red-200":"bg-white text-gray-800 border border-gray-200"),children:[(0,a.jsx)("p",{className:"jsx-e7c3f481c9f14ed0 text-sm leading-relaxed whitespace-pre-wrap",children:e.content}),(0,a.jsx)("div",{className:"jsx-e7c3f481c9f14ed0 "+"text-xs mt-2 ".concat("user"===e.role?"text-blue-100":e.isError?"text-red-600":"text-gray-500"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),"user"===e.role&&(0,a.jsx)("div",{className:"jsx-e7c3f481c9f14ed0 w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(m.Z,{className:"w-5 h-5 text-white"})})]},e.id)),y&&(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0 flex gap-3 justify-start",children:[(0,a.jsx)("div",{className:"jsx-e7c3f481c9f14ed0 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0 bg-white p-3 rounded-2xl border border-gray-200",children:[(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0 flex gap-1",children:[(0,a.jsx)("div",{className:"jsx-e7c3f481c9f14ed0 w-2 h-2 bg-gray-400 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"jsx-e7c3f481c9f14ed0 w-2 h-2 bg-gray-400 rounded-full animate-pulse animation-delay-100"}),(0,a.jsx)("div",{className:"jsx-e7c3f481c9f14ed0 w-2 h-2 bg-gray-400 rounded-full animate-pulse animation-delay-200"})]}),(0,a.jsx)("div",{className:"jsx-e7c3f481c9f14ed0 text-xs text-gray-500 mt-1",children:p>0?"Retrying... (".concat(p,"/").concat(2,")"):"Thinking..."})]})]}),(0,a.jsx)("div",{ref:v,className:"jsx-e7c3f481c9f14ed0"})]}),s.length<=1&&!g&&(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0 p-4 bg-white border-t border-gray-200",children:[(0,a.jsx)("p",{className:"jsx-e7c3f481c9f14ed0 text-sm text-gray-600 mb-3 font-medium",children:"Quick questions:"}),(0,a.jsx)("div",{className:"jsx-e7c3f481c9f14ed0 flex flex-wrap gap-2",children:["What subjects do you offer?","Course er fees koto?","ইংরেজি কোর্স আছে?"].map((e,t)=>(0,a.jsx)("button",{onClick:()=>C(e),disabled:y,className:"jsx-e7c3f481c9f14ed0 text-xs bg-blue-50 text-blue-600 px-3 py-2 rounded-full hover:bg-blue-100 transition-colors border border-blue-200 disabled:opacity-50",children:e},t))})]}),(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0 p-4 bg-white border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"jsx-e7c3f481c9f14ed0 flex gap-2",children:[(0,a.jsx)("input",{ref:N,type:"text",value:x,onChange:e=>h(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D())},placeholder:"Ask me anything about BrainEdify...",disabled:y,maxLength:500,className:"jsx-e7c3f481c9f14ed0 flex-1 p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm disabled:bg-gray-50 disabled:cursor-not-allowed"}),(0,a.jsx)("button",{onClick:()=>D(),disabled:!x.trim()||y,"aria-label":"Send message",className:"jsx-e7c3f481c9f14ed0 w-12 h-12 bg-blue-500 text-white rounded-xl hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:y?(0,a.jsx)(f.Z,{className:"w-5 h-5 animate-spin"}):(0,a.jsx)(u.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("p",{className:"jsx-e7c3f481c9f14ed0 text-xs text-gray-500 mt-2 text-center",children:["Press Enter to send • Powered by AI • ",x.length,"/500"]})]})]}),(0,a.jsx)(n(),{id:"e7c3f481c9f14ed0",children:"@-webkit-keyframes slideInUp{0%{opacity:0;-webkit-transform:translatey(20px);transform:translatey(20px)}100%{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes slideInUp{0%{opacity:0;-moz-transform:translatey(20px);transform:translatey(20px)}100%{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes slideInUp{0%{opacity:0;-o-transform:translatey(20px);transform:translatey(20px)}100%{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes slideInUp{0%{opacity:0;-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px)}100%{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.animate-slideInUp{-webkit-animation:slideInUp.3s ease-out forwards;-moz-animation:slideInUp.3s ease-out forwards;-o-animation:slideInUp.3s ease-out forwards;animation:slideInUp.3s ease-out forwards}.animation-delay-100{-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s}.animation-delay-200{-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}.overflow-y-auto::-webkit-scrollbar{width:4px}.overflow-y-auto::-webkit-scrollbar-track{background:#f1f1f1}.overflow-y-auto::-webkit-scrollbar-thumb{background:#cbd5e0;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.overflow-y-auto::-webkit-scrollbar-thumb:hover{background:#a0aec0}@media(max-width:640px){.chatbot-window{width:-webkit-calc(100vw - 2rem);width:-moz-calc(100vw - 2rem);width:calc(100vw - 2rem);height:80vh;bottom:1rem;left:1rem;right:1rem}}"})]})}}}]);